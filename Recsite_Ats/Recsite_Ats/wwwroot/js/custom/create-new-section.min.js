document.addEventListener("DOMContentLoaded",function(){document.getElementById("showNewSectionForm").addEventListener("click",function(n){n.preventDefault();document.querySelector(".newSectionFormContainer").style.display="block"});document.getElementById("cancelNewSection").addEventListener("click",function(n){n.preventDefault();document.querySelector(".newSectionFormContainer").style.display="none"});document.getElementById("saveNewSection").addEventListener("click",function(){const t=document.getElementById("newSectionForm"),i=t.dataset.url,n={SectionName:document.querySelector("#sectionName").value,TableName:document.querySelector("#tableName").value};fetch(i,{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value},body:JSON.stringify(n)}).then(n=>n.json()).then(()=>{showToast("success",n.message),location.reload()}).catch(()=>{showToast("error","Failed to create section")})});document.querySelectorAll(".delete-section").forEach(n=>{n.addEventListener("click",function(n){n.preventDefault();const t=this.href,i=document.querySelector('input[name="__RequestVerificationToken"]').value;confirm("Are you sure you want to delete this section?")&&fetch(t,{method:"POST",headers:{RequestVerificationToken:i}}).then(n=>n.json()).then(n=>{n.success?(showToast("success",n.message),this.closest(".sectionRow").remove(),location.reload()):showToast("error","Failed to delete section")}).catch(n=>{console.error("Error:",n),showToast("error","Failed to delete section")})})});document.querySelectorAll(".edit-section").forEach(n=>{n.addEventListener("click",function(n){n.preventDefault();const t=this.href,i=document.querySelector('input[name="__RequestVerificationToken"]').value;fetch(t,{method:"PUT",headers:{RequestVerificationToken:i}}).then(n=>n.json()).then(n=>{n.success?(location.reload(),showToast(n.message,"success","Success")):showToast("Failed to edit section","error","Error")}).catch(()=>{showToast("Failed to edit section","error","Error")})})});document.querySelectorAll(".delete-custom-field").forEach(n=>{n.addEventListener("click",function(n){n.preventDefault();const t=this.href,i=document.querySelector('input[name="__RequestVerificationToken"]').value;fetch(t,{method:"DELETE",headers:{RequestVerificationToken:i}}).then(n=>n.json()).then(n=>{n.success?(location.reload(),showToast(n.message,"success","Success")):showToast("Failed to edit section","error","Error")}).catch(()=>{showToast("Failed to edit section","error","Error")})})})});