"use strict";$(function(){$(".sortable-table tbody").sortable({connectWith:".sortable-table tbody",placeholder:"sortable-placeholder",stop:function(){$(".sortable-table tbody .placeholder").remove();$(".sortable-table").each(function(){var t=$(this).data("section-id"),n;$(this).find("tbody tr.no-fields").remove();n=$(this).find("tbody tr");n.each(function(n,i){$(i).attr("data-sort-order",n+1);$(i).attr("data-section-layout-id",t)});n.length===0&&$(this).find("tbody").append('<tr class="no-fields"><td colspan="10">No fields available<\/td><\/tr>')})},receive:function(){$(this).find(".placeholder").remove()}}).disableSelection()});document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("saveOrderButton");n&&n.addEventListener("click",function(){var n=[];document.querySelectorAll(".sortable-table tbody tr.item").forEach(function(t){var i=t.dataset.orderCount,f=t.dataset.item,r=document.querySelector("#cka_"+i),u=document.querySelector("#flexSwitchCheckDefault_"+i),e=r?r.checked:!1,o=u?u.checked:!1,s={TableName:t.dataset.tableName,AccountId:t.dataset.accountId,FieldName:t.dataset.fieldName,Id:f,CustomFieldTypeName:t.dataset.customFieldTypeName,CustomFieldTypeId:t.dataset.customFieldTypeId,SectionLayoutId:t.dataset.sectionLayoutId,IsNullable:t.dataset.isNullable==="True",IsLocked:t.dataset.isLocked==="True",IsRequired:e,IsVisible:o,SortOrder:t.dataset.sortOrder,IsCustomField:t.dataset.isCustomField==="True"};n.push(s)});confirm("Are you sure you want to update?")&&fetch("/AdminSetting/UpdateOrder",{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value},body:JSON.stringify(n)}).then(function(n){return n.json()}).then(function(){alert("Update Successful.");location.reload()})["catch"](function(n){console.error("Error:",n);alert("An error occurred while updating.")})})});document.addEventListener("DOMContentLoaded",function(){document.getElementById("showNewSectionForm").addEventListener("click",function(n){n.preventDefault();document.querySelector(".newSectionFormContainer").style.display="block"});document.getElementById("cancelNewSection").addEventListener("click",function(n){n.preventDefault();document.querySelector(".newSectionFormContainer").style.display="none"});document.getElementById("saveNewSection").addEventListener("click",function(){var t=document.getElementById("newSectionForm"),i=t.dataset.url,n={SectionName:document.querySelector("#sectionName").value,TableName:document.querySelector("#tableName").value};fetch(i,{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value},body:JSON.stringify(n)}).then(function(n){return n.json()}).then(function(){showToast("success",n.message);location.reload()})["catch"](function(){showToast("error","Failed to create section")})});document.querySelectorAll(".delete-section").forEach(function(n){n.addEventListener("click",function(n){var r=this,t,i;n.preventDefault();t=this.href;i=document.querySelector('input[name="__RequestVerificationToken"]').value;confirm("Are you sure you want to delete this section?")&&fetch(t,{method:"POST",headers:{RequestVerificationToken:i}}).then(function(n){return n.json()}).then(function(n){n.success?(showToast("success",n.message),r.closest(".sectionRow").remove(),location.reload()):showToast("error","Failed to delete section")})["catch"](function(n){console.error("Error:",n);showToast("error","Failed to delete section")})})});document.querySelectorAll(".edit-section").forEach(function(n){n.addEventListener("click",function(n){n.preventDefault();var t=this.href,i=document.querySelector('input[name="__RequestVerificationToken"]').value;fetch(t,{method:"PUT",headers:{RequestVerificationToken:i}}).then(function(n){return n.json()}).then(function(n){n.success?(location.reload(),showToast(n.message,"success","Success")):showToast("Failed to edit section","error","Error")})["catch"](function(){showToast("Failed to edit section","error","Error")})})});document.querySelectorAll(".delete-custom-field").forEach(function(n){n.addEventListener("click",function(n){n.preventDefault();var t=this.href,i=document.querySelector('input[name="__RequestVerificationToken"]').value;fetch(t,{method:"DELETE",headers:{RequestVerificationToken:i}}).then(function(n){return n.json()}).then(function(n){n.success?(location.reload(),showToast(n.message,"success","Success")):showToast("Failed to edit section","error","Error")})["catch"](function(){showToast("Failed to edit section","error","Error")})})})});